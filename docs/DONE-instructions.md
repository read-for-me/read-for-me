# DONE 문서 작성 가이드

> 이 문서는 개발 완료 이력을 `DONE-{YYYYMMDD}.md`와 `DONE.md`에 정리할 때의 가이드라인입니다.
> AI 또는 개발자가 일관된 형식으로 완료 이력을 작성할 수 있도록 합니다.

---

## 문서 구조 개요

```
docs/
├── DONE.md                    # 인덱스 파일 (링크 + 요약)
├── DONE-instructions.md       # 이 문서 (작성 가이드)
└── done/
    └── DONE-{YYYYMMDD}.md     # 일자별 상세 이력
```

---

## 1. 일자별 파일 (`done/DONE-{YYYYMMDD}.md`) 작성법

### 파일명 규칙

- 형식: `DONE-YYYYMMDD.md`
- 예시: `DONE-20251223.md`, `DONE-20251224.md`

### 템플릿

```markdown
# 개발 완료 이력 - YYYY-MM-DD

> {이 날 완료한 주요 작업을 1-2줄로 요약}

---

## Phase X: {Phase 이름}

### {작업 제목}

- [x] 완료 항목 1
- [x] 완료 항목 2

**수정된 파일:**

| 파일 | 변경 내용 |
|------|----------|
| `path/to/file.py` | 변경 내용 설명 |

**핵심 구현 코드:** (필요시)

```python
# 핵심 코드 스니펫
```

**사용 예시:** (필요시)

```bash
# 사용법
```

**동작 흐름:** (복잡한 기능의 경우)

```
[입력] → [처리1] → [처리2] → [출력]
```

---

## 설계 결정 기록 (ADR)

> 해당 날짜에 결정된 ADR만 포함

### ADR-XXX: {제목}

| 항목 | 내용 |
|------|------|
| **결정** | 무엇을 결정했는지 |
| **이유** | 왜 이렇게 결정했는지 |
| **대안** | 고려했던 다른 방법들 |
| **결과** | 결정으로 인한 결과/영향 |
```

### 작성 규칙

1. **Phase별 섹션 구분**: 하루에 여러 Phase 작업이 있으면 `## Phase X: {이름}` 섹션으로 구분
2. **체크리스트 형식**: 완료 항목은 `- [x]` 형식으로 작성
3. **수정된 파일 테이블**: 변경된 파일과 변경 내용을 테이블로 정리
4. **코드 스니펫**: 핵심 구현 코드는 언어 태그와 함께 코드 블록으로 작성
5. **ADR 포함**: 해당 날짜에 내린 설계 결정이 있으면 ADR 섹션에 추가

### ADR 번호 부여 규칙

- 순차적으로 번호 부여: ADR-001, ADR-002, ...
- 새 ADR 추가 시 `DONE.md` 인덱스의 ADR 테이블도 함께 업데이트

---

## 2. 인덱스 파일 (`DONE.md`) 업데이트법

### 업데이트할 섹션들

#### 2-1. 일자별 완료 이력 테이블

새 일자 파일 생성 시 **테이블 최상단**에 추가:

```markdown
## 일자별 완료 이력

| 일자 | Phase | 주요 작업 | 링크 |
|------|-------|----------|------|
| 2025-12-24 | Phase 3 | {새로운 작업 요약} | [상세](done/DONE-20251224.md) |
| 2025-12-23 | Phase 2, 3 | GeekNews 원본 크롤링, 요약 서비스... | [상세](done/DONE-20251223.md) |
...
```

#### 2-2. Phase별 진행 상황

Phase 상태 변경 시 업데이트:

```markdown
### Phase 3: AI 서비스 구현 (진행 중)

- 시작일: 2025-12-23
- 관련 파일: [DONE-20251221](done/DONE-20251221.md), [DONE-20251223](done/DONE-20251223.md), [DONE-20251224](done/DONE-20251224.md)

**주요 작업:**
- Vertex AI 인증 설정
- LangChain 기반 요약 서비스 구현
- {새로 추가된 작업}
```

#### 2-3. ADR 인덱스

새 ADR 추가 시 테이블에 추가:

```markdown
## ADR 인덱스

| ADR | 제목 | 결정일 | 링크 |
|-----|------|--------|------|
| ADR-011 | {새 ADR 제목} | 2025-12-24 | [상세](done/DONE-20251224.md#adr-011-제목-slug) |
...
```

#### 2-4. 변경 이력

테이블 최상단에 추가:

```markdown
## 변경 이력

| 날짜       | 변경 내용                                    |
| ---------- | -------------------------------------------- |
| 2025-12-24 | {오늘 완료한 주요 작업 요약}                 |
| 2025-12-23 | 문서 분할: 일자별 파일로 분리, 인덱스 파일로 변환 |
...
```

---

## 3. 실제 예시

### 새 작업 완료 시 워크플로우

1. **일자별 파일 확인**: `docs/done/DONE-20251224.md` 파일이 있는지 확인
   - 없으면: 템플릿으로 새 파일 생성
   - 있으면: 기존 파일에 새 섹션 추가

2. **일자별 파일에 작업 내용 작성**:
   ```markdown
   ### TTS 서비스 구현
   
   - [x] Google Cloud TTS API 연동
   - [x] 음성 파일 저장 로직 구현
   
   **수정된 파일:**
   
   | 파일 | 변경 내용 |
   |------|----------|
   | `backend/app/services/tts.py` | TTSService 클래스 구현 |
   | `backend/app/api/v1/audio.py` | POST /audio 엔드포인트 추가 |
   ```

3. **인덱스 파일 업데이트** (`DONE.md`):
   - 일자별 테이블에 행 추가 (또는 기존 행의 "주요 작업" 업데이트)
   - Phase별 진행 상황의 "관련 파일" 링크 추가
   - 변경 이력 테이블에 오늘 날짜 행 추가

---

## 4. 주의사항

1. **Phase 완료 시**: Phase별 진행 상황에서 "(진행 중)" → "(완료)"로 변경하고 완료일 기록

2. **상세 레퍼런스**: Phase 완료일의 파일에 상세 레퍼런스(디렉토리 구조, 클래스 시그니처, 사용법 등) 포함

3. **ADR 앵커 링크**: ADR 인덱스의 링크는 `#adr-xxx-제목-slug` 형식으로 작성
   - 예: `#adr-008-langchain-structured-output-선택`

4. **일관된 형식 유지**: 테이블, 코드 블록, 체크리스트 형식을 일관되게 사용

5. **최신순 정렬**: 테이블은 최신 날짜가 위로 오도록 정렬

---

## 5. 빠른 참조

### 새 일자 파일 생성 체크리스트

- [ ] `docs/done/DONE-YYYYMMDD.md` 파일 생성
- [ ] 헤더에 날짜와 요약 작성
- [ ] Phase별 섹션으로 작업 내용 구분
- [ ] 수정된 파일 테이블 작성
- [ ] 필요시 ADR 섹션 추가

### 인덱스 업데이트 체크리스트

- [ ] 일자별 완료 이력 테이블 업데이트
- [ ] Phase별 진행 상황 업데이트 (필요시)
- [ ] ADR 인덱스 테이블 업데이트 (새 ADR 있을 시)
- [ ] 변경 이력 테이블 업데이트

